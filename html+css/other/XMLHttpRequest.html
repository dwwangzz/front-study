<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="../static/js/jquery-1.11.2.min.js"></script>
    <title>XMLHttpRequest</title>
    <!-- 文档地址：http://www.ruanyifeng.com/blog/2012/09/xmlhttprequest_level_2.html -->
</head>
<body>
<input type="button" onclick="test()" value="Ajax访问">
</body>

<script>
    function test() {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'localhost:8080/success');
        // xhr.open('GET', 'test.json');
        xhr.send();
        /**
         * 等待远程主机做出回应
         * xhr.readyState：XMLHttpRequest对象的状态，等于4表示数据已经接收完毕。
         　　* xhr.status：服务器返回的状态码，等于200表示一切正常。
         　　* xhr.responseText：服务器返回的文本数据
         　　* xhr.responseXML：服务器返回的XML格式的数据
         　　* xhr.statusText：服务器返回的状态文本。
         */
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                alert(xhr.responseText);
            } else {
                alert(xhr.statusText);
            }
        };

        xhr.onerror = function (e) {
            console.log(e);
        }


        // var form = document.getElementById('myform');
        // var formData = new FormData(form);
        // formData.append('secret', '123456'); // 添加一个表单项
        // xhr.open('POST', form.action);
        // xhr.send(formData);


        // var formData = new FormData();
        // formData.append('username', '张三');
        // formData.append('id', 123456);
        // xhr.send(formData);


        // var formData = new FormData();
        // for (var i = 0; i < files.length;i++) {
        //     formData.append('files[]', files[i]);
        // }
    }

</script>

</html>
